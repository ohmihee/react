<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/javascript">
        console.log(1)
        setInterval(()=>{
            console.log(2)
        },1000)
        console.log(3)
    // 프로세스 > 쓰레드
    // 프로세스 => ex) 비쥬얼 스튜디오 코드 / mysql
    // 쓰레드 => ex) 자동저장 ~매 초마다 시간과 조건(코드의 변화)을 확인 && 비쥬얼스튜디오에 코드 작성을 하여 구현되는 기능 => 두 가지 일이 함께
    // 싱글쓰레드 => 자바스크립트 => 하나의 쓰레드 => 
    // 멀티쓰레드 => 파이썬(ex 이전 작업이 끝날때까지 다른 작업을 실행하지 않음) ~ 별도의 스레드를 생성하지 않는 이상 작업은 순서대로 즉 동기적으로 진행된다.
    </script>

    <script type="text/babel">
    /*
        // 생명주기
        => componentDidMount(){} => render가 완료되면 실행
    */
        // 클래스나 함수 등 선언하는 것과 실제 실행하는 것은 다름
    // 비동기사용
    // 

    // class는 함수 들을 묶어주는 것이지 실제 실행x 선언만 한 것이라 볼 수 있따.
    class App extends React.Component{
        state = {
            dog:''
        }
        


        componentDidMount(){
            this.refresh
        }// => 이 역시 실제 실행을 하는 것은 아니다.
        // componenntDidMount()=> 해당 class가 한 번도 실행된 것 없다가 최초 render가 끝나면 실행된다. 즉 만약에 중간에 onClick을 눌러 상태값이 바뀌는 등 최초의 실행이 아니게 되면 componentDidMount는 실행되지 않는다.
        // 
        // hooks
        // conponentDidUpdate()

        // 함수형 컴포넌트의 사용이 더욱 증가하는 추세

        refresh = async () => {
            const response = await fetch('https://dog.ceo/api/breeds/image/random')
            const data = await response.json() // 결과물은 json형태로 만들어주는 것
            this.setState({dog:data})
            //this.state.dog에 data의 내용을 담아준 것
        }

        render(){
            return(
                // 아래의 <img src={this.state.dog.message}> => json형태로 되어 
                <div>
                    {this.state.dog?<img src={this.state.dog.message}/>:'loadding'}
                    
                    <button onClick={this.refresh}>
                        새로고침
                    </button>
                </div>
                // onclick을 누르는 것은 다시 한번 해당 클래스를 실행하게 되는 것이므로 최초 render가 아니게 되어 componentDidMount는 실행되지 않는다.
                // 여기서도 return만 해주는 것이지 실제 실행을 하는 공간은 아니다.
            )
        }



    }


    ReactDOM.render(
        // 실제 실행이 되는 부분
        <App/>,
        document.querySelector('#root')
        // 실행이 되는 위치
    )

    // index2는 같은 내용을 함수식으로 작성
    </script>
    
</body>
</html>